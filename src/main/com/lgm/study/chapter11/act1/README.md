# 공유 중인 가변 데이터는 동기화해 사용하라
### synchronized 키워드
* 해당 메서드나 블록을 한 스레드씩 수행하도록 보장
### synchronized 키워드 사용 이유
1. 배타적 수행 보장
    * 한 스레드가 변경 중인 일관되지 않은 순간의 객체를 다른 스레드가 접근하지 못하도록 막는 용도 
2. 스레드 사이의 안정적인 통신 보장
    * 동기화 없이는 한 스레드가 만든 변화를 다른 스레드에서 확인하지 못할 수 있음
### volatile 한정자
* 배타적 수행과는 상관없지만 항상 가장 최근에 기록된 값을 읽게 됨을 보장
* synchronized의 효과 중 통신 쪽만 지원
#### 가변 데이터는 단일 스레드에서만 쓰도록 할 것
  * 한 스레드가 데이터를 모두 수정 후 다른 스레드에 공유할 때는 해당 객체에서 공유하는 부분만 동기화해도 됨
    * 해당 객체를 다시 수정할 일이 있을 때까지 다른 스레드들이 동기화 없이 자유롭게 값을 읽을 수 있음
  * 클래스 초기화 과정에서 객체를 `정적 필드`, `volatile 필드`, `final 필드` 또는 보통의 락을 통해 접근하는 필드에 저장해도 됨
### 결론
* 여러 스레드가 가변 데이터를 공유한다면 그 데이터를 읽고 쓰는 동작은 반드시 동기화해야 한다.
* 동기화를 하지 않으면 한 스레드가 수행한 변경을 다른 스레드가 보지 못할 수도 있다.
* 배타적 실행은 필요 없고 스레드 끼리의 통신만 필요하다면 `volatile` 한정자만으로 동기화할 수 있다.
---
[[Prev act >>]](../../chapter10/act9/README.md)  
[[Next act >>]](../act2/README.md)